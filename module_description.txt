Plankton-Tracking-Pipeline — Module Descriptions
================================================

This document describes the role of each module in the StentorCam plankton
detection, tracking, motion analysis, and behavior classification pipeline.


1. run_tracker.py
-----------------
Entry-point script that selects the video source and execution mode.
Handles single-video or batch directory processing and instantiates the
main pipeline with the selected video path. Responsible for batch control,
progress reporting, and clean termination.


2. pipeline.py
--------------
Main orchestration module. Controls video I/O, per-frame processing order,
integration of detection, tracking, motion feature extraction, behavior
classification, CSV output, and visualization. Acts as the central
coordinator but contains minimal algorithmic logic itself.


3. config.py
------------
Central configuration file defining all analysis parameters, including
detection thresholds, ROI mask settings, motion and behavior constants,
visualization flags, and runtime options. Parameters are recorded separately
in per-run manifests to ensure reproducibility.


4. detector.py
--------------
Foreground detection module. Implements background subtraction using a
median background model (HSV V channel), thresholding, and morphological
filtering to produce foreground masks and object contours. Optionally applies
a circular ROI mask to restrict detection to a defined spatial region.


5. tracker.py
-------------
Object association and ID persistence module. Links detections across frames
to form tracklets with consistent object IDs. Designed to be lightweight and
agnostic to higher-level behavior logic, enabling post-processing to merge or
refine tracklets if needed.


6. kinematics.py
----------------
Low-level motion computation utilities. Provides displacement, vector, and
angle calculations used by higher-level motion feature extraction. Contains
no temporal smoothing or behavioral interpretation.


7. features_motion.py
---------------------
Motion feature extraction module. Computes causal, windowed velocity,
averaged speed, and velocity direction from tracked positions. Implements
jitter suppression and displacement gating to ensure stable motion estimates
suitable for behavioral classification.


8. features_morphology.py
-------------------------
Morphological feature extraction module. Computes shape-based descriptors
such as area, perimeter, aspect ratio, and solidity. Also derives rotated
minimum-area bounding boxes used for orientation and head–tail inference.


9. movement_state.py
--------------------
Behavior classification module. Assigns discrete movement states
(SWIM_FORWARD, SWIM_BACKWARD, ATTACHED) based on speed thresholds and the
alignment between body orientation and swimming direction. Uses rule-based,
biologically interpretable logic.


10. threshold_tuner.py
----------------------
Standalone interactive calibration utility for foreground detection
parameters. Allows tuning of threshold and size filters while visualizing
binary detection output. Used to determine detection parameters before
tracking.


Design Philosophy
-----------------
The pipeline enforces separation of concerns:
- Tuning tools are isolated from analysis
- Detection, tracking, motion, and behavior are modular
- Motion features are causal and windowed
- Behavioral states are biologically interpretable
- Reproducibility is prioritized through explicit configuration

```
